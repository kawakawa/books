# グラス片手にデータベース設計 販売管理システム編
- 著者
    - 梅田 弘之


---

- 内部けん制機能の考慮
    - 取引を成立させる部門と取引を実行する部門を分けることで不正を防止する
        - なんでも同じ画面にしたら良いということにならない
        - 例：請求処理を行う経理部門と入金処理を行う財務部門を分ける

- 変更に強いマスタ
    - 項目に「開始日」と「終了日」を追加
        - 事前にマスタを用意しておくことができる
        
    - 主キーに商品コードを入れない
        - 商品コード
            -10101001
                - 1：食品、2:飲料・・
                - 010：食肉、020：水産・・・
                - 1001:牛肉、1002：豚肉・・・
        - 商品コードにこのようなカテゴリなどを含めたものを主キーにするとビジネスの変化に対応できない主キーとなってしまう
        
        
- 手抜き上手は、お料理上手
    - 割り切れるところは割り切る


- 雑コード
    - ダミーとするコードのこと
    - 一見さん（ユーザ登録していない客)など用のコード（例：9999）など
    - ただし、あとから登録客に昇格させたい場合は雑コードにしてしまうと、過去取引は不明になるので使用箇所は考えること
    
- 受注データと売上データの分離
    - 部分売り上げへの対応
        - １つの受注に対して、分割して売り上げを計上するなど
    - 内容変更への対応
        - 受注時の金額単価と、売り上げ時の金額が違う場合など
    - 受注のない売り上げへの対応
        - 直接、売り上げ処理を行う場合など
        
        
- 戻り作業を想定する
    - ビジネスで発生しうる戻り作業やキャンセル作業などを想定し、柔軟に対応できる設計を考える
    

- 入金処理と売掛金消込処理の分離
    - 入金時にリアルタイムで売掛消込を行うのは難しい
        - 例：都度請求/一括支払いで請求金額と入金額が合わない場合、どの請求分が未入金なのかわからないので、調べる必要がある

    - いちいち消込作業していては時間がかかるが、会計処理としてはいち早く入金したという事実は登録しておきたい
        - 当座預金/売掛金という仕訳を起こして、企業のキャッシュフローの実態を早く反映させたい
        
    - そのため、入金処理を先に行い、売掛金の消込処理はあとで行えるように分離操作を可能にしておく
        - 何のための入金かわかるように「仮受金」として処理したあとに、請求に対する支払いと分かった時点で「売掛金」に振り替える
        
    - 全く逆の方法
        - 請求金額の消し込んだときに自動的に入金処理が行わる方法
            - 入金してから請求消込を行うという2段階アクションよりも、請求消込だけで入金処理も自動に行われるので手っ取り早いアプローチとなる
            
- 売掛金消込時の特殊処理
    - 振込手数料（315円や420円）分だけ足りないなどの場合には、自動的に「一致」とみなすという処理
        - 本当ならば、客が手数料分込みで入金すべき

- ユーザの更新日時とBAT更新日時の2項目を用意しておく
    - あとで調査するときに楽になる

       
- マグレガーのX理論、Y理論
    - X理論
        - いやいやお金のために働いている
            - 上司から見るとアメとムチで従業員はコントロールしなければと考えてしまう
    - Y理論
        - 自己実現・社会貢献など理由で働いている
        

- モノの有効期限
    - 客に届いたときにすでに有効期限間際だと怒られるので、品質の有効期限のほかに、出荷可能期限という項目を用意する

- 棚卸表
    - 事前に認知しているモノの増減・欠品だけでなく
    - 帳簿にのっていなかった商品があったら、それを登録できるようにしておく必要がある
    
    
- 販売管理システムの流れ
    - 商品の流れとお金の流れがある
    - 商品の流れ
        - 入庫・出庫や直送
    - お金の流れ
        - 仕入れ・売上の形状処理
        
    - 倉庫担当者が商品の流れ、営業や調達担当が数量と金額を管理するということが多い
    
- 仕入れを計上しないで売り上げを計上できるのか？
    - 原則的に仕入れがなければ売り上げはできない
        - 仕入れ未計上のまま売り上げを計上することは会計上ありえない
        - 社内の仕組み上、請求書がないと支払えないということであれば、仕入れ計上しておいて、売掛金のまま置いておくことになります。
        